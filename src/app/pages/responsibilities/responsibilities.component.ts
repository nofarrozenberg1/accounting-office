import { NgFor, NgIf } from '@angular/common';
import { AfterViewInit, Component, ElementRef, ViewChild } from '@angular/core';

type Item = {
  title: string;
  description: string;
  points: string[];
  icon: string;
};

@Component({
  selector: 'app-responsibilities',
  imports: [NgFor, NgIf],
  templateUrl: './responsibilities.component.html',
  styleUrl: './responsibilities.component.css',
})
export class ResponsibilitiesComponent implements AfterViewInit {
  selectedItem: Item | undefined;
  items: Item[] = [
    {
      title: 'שירותי ראיית חשבון',
      description:
        'כל עסק זקוק לרואה חשבון מקצועי שמבין את המצב הפיננסי שלו לעומק ויכול לספק ייעוץ אסטרטגי, לוודא עמידה בדרישות החוק ולשפר את ההתנהלות הכלכלית. אנו מספקים שירותי ראיית חשבון וביקורת מקצועיים, תוך התאמה אישית לצרכים הייחודיים של העסק שלכם. בעזרתנו תוכלו לנהל את העסק בצורה חכמה, לצמצם סיכונים ולשמור על יציבות פיננסית.',
      points: [
        'ביקורת דוחות כספיים – ניתוח וביקורת לדוחות העסקיים',
        'תכנון פיננסי – גיבוש מודלים חשבונאיים לשיפור ההתנהלות הכלכלית',
        'מאזנים ודוחות – הכנת דוחות פיננסיים מקצועיים',
        'ניתוח סיכונים – הערכת סיכונים פיננסיים וניהול מושכל',
        'הצהרות הון – הכנת הצהרות הון מקצועיות',
        'ייעוץ תמחירי – חשבונאות ניהולית מותאמת לעסק',
        "בדיקות נאותות – בדיקות דיו דיליג'נס לקראת עסקאות והחלטות פיננסיות",
      ],
      icon: 'fa-solid fa-calculator',
    },
    {
      title: 'הנהלת חשבונות',
      description:
        'הנהלת חשבונות מסודרת היא המפתח לניהול עסק חכם ומוצלח. תיעוד מדויק של הכנסות והוצאות מאפשר לכם לעקוב אחר הביצועים הפיננסיים ולקבל החלטות טובות יותר. אנו מספקים שירותי הנהלת חשבונות מקיפים ומותאמים אישית – לעצמאים, חברות ומלכ"רים – תוך דגש על סדר, דיוק והתנהלות נכונה מול רשויות המס.',
      points: [
        'חשבות שכר – ניהול חכם של שכר העובדים ועמידה בתקנות המס',
        'הכנת תלושי שכר – הפקת תלושי שכר חודשיים ודוחות שנתיים',
        'דיווחים לרשויות – הגשת דיווחים שוטפים למס הכנסה, מע"מ וביטוח לאומי',
        'דוחות רווח והפסד – מעקב פיננסי חודשי ורבעוני',
        'רישום והפקת דוחות – ניהול ספרי העסק בצורה ממוחשבת',
        'ייעוץ שוטף – מענה מקצועי וזמין לכל שאלה פיננסית',
      ],
      icon: 'fa-solid fa-file-invoice-dollar',
    },
    {
      title: 'ליווי עסקי ופיננסי',
      description:
        'ניהול עסק מצליח דורש הרבה יותר מרעיון טוב – הוא דורש תכנון פיננסי נכון וקבלת החלטות מושכלות. אנו מספקים ליווי עסקי ופיננסי שמאפשר לכם להתמקד בצמיחה, בעוד שאנחנו דואגים לתזרים מזומנים תקין, מקורות מימון משתלמים ותכנון אסטרטגי מדויק. בעזרת הליווי שלנו תוכלו להימנע ממשברים כלכליים, לשפר את הרווחיות ולמקסם את ההזדמנויות העסקיות שלכם.',
      points: [
        'ניהול כספים חיצוני – תכנון וניהול פיננסי מקצועי לעסקים',
        'הכנת תוכנית עסקית – בניית אסטרטגיה כלכלית חכמה ומבוססת נתונים',
        'ניהול תזרים מזומנים – שמירה על יציבות פיננסית ומניעת משברים',
        'גיוס מימון – סיוע בהשגת מימון בנקאי וחוץ בנקאי בתנאים אטרקטיביים',
        'בדיקת כדאיות כלכלית – הערכת רווחיות לפני קבלת החלטות עסקיות',
        'הערכת שווי – קביעת שווי עסקי מקצועי לצורך השקעות, מכירה או שותפויות',
      ],
      icon: 'fa-solid fa-chart-line',
    },
    {
      title: 'שירותי ייעוץ מס',
      description:
        'ניהול מס נכון הוא לא רק חובה חוקית – הוא המפתח לחיסכון כלכלי משמעותי ולמיקסום רווחים. חוקי המס בישראל מורכבים ומשתנים בתדירות גבוהה, וכל עסק זקוק לאסטרטגיית מס חכמה שתמנע טעויות יקרות ותמקסם את הזכויות וההטבות המגיעות לו. אנו מספקים ייעוץ מס מותאם אישית, עוזרים בתכנון מס אופטימלי, מלווים עסקים ויחידים מול רשויות המס, ומוודאים שאתם משלמים רק את מה שנדרש – ולא שקל יותר.',
      points: [
        'תכנון מס אסטרטגי – בניית תוכנית מס להפחתת נטל המס בצורה חוקית',
        'ייצוג מול רשויות המס – ליווי מקצועי בדיוני שומה מול מס הכנסה, מע"מ וביטוח לאומי',
        'סיוע בדיווחים – הכנת והגשת דיווחים לרשויות המס כדי למנוע טעויות וקנסות מיותרים',
        'ליווי עסקאות – ייעוץ מס לעסקאות רכישה, מיזוגים, השקעות ותכנוני פרישה',
        'דוחות מס שנתיים – הכנת דוחות שנתיים לעצמאים, שכירים וחברות בהתאמה אישית',
        'הצהרות הון – הכנה מקצועית של הצהרות הון תוך מקסום התועלות האפשריות',
        'החזרי מס לשכירים – בדיקת זכאות להחזרי מס והשגת הכספים שמגיעים לכם',
      ],
      icon: 'fa-solid fa-receipt',
    },
    {
      title: 'שירותי גישור',
      description:
        'סכסוכים ומחלוקות יכולים להיות מתישים ולגבות מחיר רגשי וכלכלי כבד. גישור הוא הדרך היעילה, המהירה והנעימה ביותר ליישוב מחלוקות מחוץ לכותלי בית המשפט, תוך יצירת שיח פתוח והגעה לפתרונות הוגנים ומוסכמים. באמצעות תהליך מקצועי ודיסקרטי, אנו מסייעים לצדדים להגיע להסכמות שיביאו לסיום הסכסוך בצורה מכבדת, מהירה וחסכונית.',
      points: [
        'הליך גירושים – פתרונות הוגנים להליכי פרידה תוך צמצום קונפליקטים',
        'סכסוכי ירושה – פתרון חילוקי דעות בין יורשים תוך שמירה על שלום המשפחה',
        'מחלוקות עבודה – גישור בין עובדים ומעסיקים למניעת הליכים משפטיים ממושכים',
        'אי הסכמה עסקית – יישוב סכסוכים בין שותפים או עסקים בדרך מקצועית והוגנת',
        'סכסוכי שכנים – פתרון בעיות בצורה נעימה שמאפשרת המשך חיים משותפים בהרמוניה',
      ],
      icon: 'fa-solid fa-handshake',
    },
  ];

  selectItem(item: Item) {
    this.selectedItem = item;
  }
  @ViewChild('scrollContainer') scrollContainer!: ElementRef;

  ngAfterViewInit() {
    this.checkScroll(); // Initial check on load
  }

  onScroll() {
    this.checkScroll();
  }

  private checkScroll() {
    const el = this.scrollContainer.nativeElement;
    if (el.scrollHeight - el.scrollTop <= el.clientHeight + 5) {
      el.classList.add('scrolled'); // Hide shadow when at the bottom
    } else {
      el.classList.remove('scrolled'); // Show shadow when scrollable
    }
  }
}
